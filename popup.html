<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Site Blocker</title>
  <style>
    body { font-family: system-ui, Arial; width: 320px; padding: 12px; }
    h3 { margin: 12px 0 6px; }
    input, button, select { width: 100%; margin: 6px 0; padding: 8px; box-sizing: border-box; }
    .row { display: flex; gap: 8px; }
    .row > * { flex: 1; }
    .pill { display: inline-flex; align-items: center; gap: 8px; background: #eee; padding: 4px 8px; border-radius: 999px; margin: 4px 6px 0 0; }
    .pill button { width: auto; padding: 2px 6px; }
    small { color: #666; }
    .muted { color: #888; font-size: 12px; }
    .section { border-top: 1px solid #eee; margin-top: 10px; padding-top: 10px; }

    /* Toggle switch styles */
    .toggle-wrap { display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .switch { position: relative; display: inline-block; width: 44px; height: 24px; }
    .switch input { display: none; }
    .slider {
      position: absolute; cursor: pointer;
      top: 0; left: 0; right: 0; bottom: 0;
      background-color: #ccc; transition: .2s; border-radius: 999px;
    }
    .slider:before {
      position: absolute; content: "";
      height: 18px; width: 18px; left: 3px; bottom: 3px;
      background-color: white; transition: .2s; border-radius: 50%;
      box-shadow: 0 1px 2px rgba(0,0,0,.2);
    }
    input:checked + .slider { background-color: #4caf50; }
    input:checked + .slider:before { transform: translateX(20px); }

    /* Blur effect when Parent Mode is ON */
    .blurred { filter: blur(3px); pointer-events: none; }
  </style>
</head>
<body>
  <h3>Blocked sites</h3>
  <div id="blockedList"></div>

  <div class="section">
    <h3>Add a site to block</h3>
    <div class="row">
      <input id="siteInput" placeholder="reddit.com" />
      <button id="useCurrentForBlock" title="Use current tab">â†»</button>
    </div>
    <button id="blockBtn">Block</button>
    <small id="status"></small>
  </div>

  <div class="section">
    <h3>Temporary unlock</h3>
    <select id="unlockSiteSelect"></select>
    <div class="row">
      <select id="durationSelect">
        <option value="2">2 min</option>
        <option value="5" selected>5 min</option>
        <option value="10">10 min</option>
        <option value="15">15 min</option>
        <option value="30">30 min</option>
      </select>
      <input id="password" type="password" placeholder="Password (master)" />
    </div>
    <button id="unlockBtn" disabled>Unlock</button>
    <small id="unlockStatus" class="muted"></small>
  </div>

  <div class="section">
    <h3>Settings</h3>
    <!-- ONE master password field. When Parent Mode is ON, it blurs/locks but remains the active password. -->
    <div class="row">
      <input id="newPassword" type="password" placeholder="Set / change master password" />
      <button id="savePasswordBtn">Save password</button>
    </div>

    <div class="toggle-wrap">
      <div style="display:flex; align-items:center; gap:10px;">
        <label class="switch">
          <input type="checkbox" id="parentModeToggle" />
          <span class="slider"></span>
        </label>
        <strong>Parent Mode</strong>
      </div>
      <small id="parentModeState" class="muted"></small>
    </div>

    <!-- Shown only when Parent Mode is ON (to disable it). Added a button here. -->
    <div id="disableParentWrap" style="display:none;">
      <input id="disableParentPassword" type="password" placeholder="Disable Parent Mode with master password" />
      <button id="disableParentBtn">Disable Parent Mode</button>
    </div>

    <small id="settingsStatus" class="muted"></small>
  </div>

  <script src="popup.js"></script>
</body>
</html>





